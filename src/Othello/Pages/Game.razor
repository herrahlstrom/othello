@page "/game"
@using Othello.Engine;
@inject NavigationManager NavMan;
@inject Engine.Game OthelloGame;
@layout EmptyLayout

<PageTitle>Othello</PageTitle>

<div class="players">
    <div class="player white @(OthelloGame.CurrentPlayer == Engine.PlayerColor.White ? "current":"")">
        <div class="name">Vit</div>
        <div class="points">@OthelloGame.WhitePoints</div>
        <div class="icon"></div>
        <div class="ai">AI: <InputCheckbox @bind-Value="WhitePlayer.Ai" /></div>
    </div>
    <div class="player black @(OthelloGame.CurrentPlayer == Engine.PlayerColor.Black ? "current":"")">
        <div class="name">Svart</div>
        <div class="points">@OthelloGame.BlackPoints</div>
        <div class="icon"></div>
        <div class="ai">AI: <InputCheckbox @bind-Value="BlackPlayer.Ai" /></div>
    </div>
</div>

<div class="o-content">
    <div class="o-table">
        @for (int i = 0; i < 64; i++)
        {
            int index = i;
            <div class="o-cell">
                @if (OthelloGame.Table[index] is null)
                {
                    <button @onclick="()=>PlaceStone(index)" class="@(_errorCells.Contains(i)?"error":"")"></button>
                }
                else
                {
                    string whiteCssStatus = OthelloGame.Table[index].Equals(Othello.Engine.PlayerColor.White) ? "up" : "down";
                    string blackCssStatus = OthelloGame.Table[index].Equals(Othello.Engine.PlayerColor.Black) ? "up" : "down";
                    <div class="stone white @(whiteCssStatus)"></div>
                    <div class="stone black @(blackCssStatus)"></div>
                }
            </div>
        }
    </div>
</div>

<div class="button-bar">
    <button @onclick="StartNewGame">Starta nytt spel</button>
</div>

@code {
    private void OnPlaceButtonClick(int index)
    {
        
    }
}